- id: '1674240649029'
  alias: Basement Lights
  description: turn on/off basement lights with switch
  trigger:
  - platform: state
    entity_id:
    - light.basement
    to: 'on'
    id: light on
  - platform: state
    entity_id:
    - light.basement
    to: 'off'
    id: light off
  - platform: device
    type: turned_on
    device_id: fd515ee5e864610ab62aab906ba2f821
    entity_id: switch.basement_sink_switch
    domain: switch
    id: sink on
    for:
      hours: 0
      minutes: 0
      seconds: 2
  - platform: device
    type: turned_off
    device_id: fd515ee5e864610ab62aab906ba2f821
    entity_id: switch.basement_sink_switch
    domain: switch
    id: sink off
    for:
      hours: 0
      minutes: 0
      seconds: 2
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: light on
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id:
          - switch.basement_sink_switch
          - switch.wall_left_plug
          - switch.wall_right_plug
      - type: turn_on
        device_id: fff1787a9e7a855b257b1b8cece4c160
        entity_id: remote.32_tcl_roku_tv
        domain: remote
    - conditions:
      - condition: trigger
        id: light off
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id:
          - switch.basement_sink_switch
          - switch.wall_left_plug
          - switch.wall_right_plug
          - switch.basement_coffee_plug
          - switch.basement_counter_plug
      - type: turn_off
        device_id: fff1787a9e7a855b257b1b8cece4c160
        entity_id: remote.32_tcl_roku_tv
        domain: remote
    - conditions:
      - condition: trigger
        id: sink on
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.basement_counter_plug
      - type: turn_on
        device_id: 10c71e3ee15286cea9b7c021a68db7bf
        entity_id: light.wiz_bulb
        domain: light
    - conditions:
      - condition: trigger
        id: sink off
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.basement_counter_plug
      - type: turn_off
        device_id: 10c71e3ee15286cea9b7c021a68db7bf
        entity_id: light.wiz_bulb
        domain: light
  mode: single
- id: '1674396254958'
  alias: Basement Office
  description: Set Basement up for office work
  trigger:
  - platform: tag
    tag_id: basement_office_tag
  condition: []
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.basement_office
    metadata: {}
  mode: single
- id: '1674416761212'
  alias: Backup Failure Notification
  description: send persistant notification if google backups not working.
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.backups_stale
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: notify.persistent_notification
    data:
      message: Problems with backups to google!!!
      title: Please Help Me
  mode: single
- id: '1674496545452'
  alias: Vaporizer Schedule
  description: Turn vaporizers on or off according to time and humidity
  trigger:
  - platform: time
    at: 00:00:00
    id: turn on
  - platform: time
    at: 04:00:00
    id: turn off
  - platform: time
    at: 08:00:00
    id: turn on
  - platform: time
    at: '12:00:00'
    id: turn off
  - platform: time
    at: '16:00:00'
    id: turn on
  - platform: time
    at: '20:00:00'
    id: turn off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: turn on
      sequence:
      - service: script.green_vaporizor
        data: {}
      - service: script.yellow_vaporizor
        data: {}
    - conditions:
      - condition: trigger
        id: turn off
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id:
          - switch.green_plug
          - switch.yellow_plug
  mode: single
- id: '1674568559701'
  alias: Upstairs Space Heater
  description: Turn on space heater is temperature low and house occupied
  trigger:
  - platform: time
    at: '20:30:00'
  condition:
  - condition: and
    conditions:
    - condition: numeric_state
      entity_id: weather.firestone_house
      attribute: temperature
      below: 65
    - condition: state
      entity_id: group.family_anyone
      state: home
  action:
  - service: remote.send_command
    data:
      device: Upstairs Heater
      command: power
      num_repeats: 1
      delay_secs: 0.4
      hold_secs: 0
    target:
      device_id: 687d5dcbc7f9474e09148fb0c4c196fa
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: remote.send_command
    data:
      device: Upstairs Heater
      command: timer
      num_repeats: 1
      delay_secs: 0.4
      hold_secs: 0
    target:
      device_id: 687d5dcbc7f9474e09148fb0c4c196fa
  mode: single
- id: '1674670061254'
  alias: Coffee Button Press
  description: turn coffee off and set coffee ready button for both basement and upstairs
  trigger:
  - platform: state
    entity_id:
    - input_boolean.basement_coffee_button
    id: basement
  - platform: state
    entity_id:
    - input_boolean.upstairs_coffee_button
    id: upstairs
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: basement
      sequence:
      - if:
        - condition: state
          entity_id: switch.basement_coffee_plug
          state: 'off'
        then:
        - if:
          - condition: state
            entity_id: input_boolean.basement_coffee_ready
            state: 'on'
          then:
          - service: script.activate_alexa_actionable_notification
            data:
              text: You already pushed the button, would you like me to start brewing
                coffee?
              event_id: basement_coffee_event
              alexa_device: media_player.basement_echo
          else:
          - service: input_boolean.turn_on
            data: {}
            target:
              entity_id: input_boolean.basement_coffee_ready
          - service: notify.alexa_media_basement_echo
            data:
              message: Coffee Pot is ready to brew coffee
              data:
                type: tts
        else:
        - service: switch.turn_off
          data: {}
          target:
            entity_id: switch.basement_coffee_plug
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.basement_coffee_ready
        - service: script.moon_lamp_off_2
          data: {}
    - conditions:
      - condition: trigger
        id: upstairs
      sequence:
      - if:
        - condition: state
          entity_id: switch.upstairs_coffee_plug
          state: 'off'
        then:
        - if:
          - condition: state
            entity_id: input_boolean.upstairs_coffee_ready
            state: 'on'
          then:
          - service: notify.alexa_media_master_echo
            data:
              message: You Already Pushed the Button!
              data:
                type: tts
          else:
          - service: input_boolean.turn_on
            data: {}
            target:
              entity_id: input_boolean.upstairs_coffee_ready
          - service: notify.alexa_media_master_echo
            data:
              message: Coffee Pot Ready to brew Coffee!
              data:
                type: tts
        else:
        - service: switch.turn_off
          data: {}
          target:
            entity_id: switch.upstairs_coffee_plug
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.upstairs_coffee_ready
        - service: script.moon_lamp_off_2
          data: {}
  mode: single
- id: '1674734486138'
  alias: Master Bathroom Light
  description: adjust master bathroom lights according to day or night
  trigger:
  - platform: state
    entity_id:
    - light.master_bathroom
    to: 'on'
  condition: []
  action:
  - if:
    - condition: time
      before: '20:00:00'
      after: 04:00:00
      weekday:
      - sat
      - fri
      - thu
      - wed
      - tue
      - mon
      - sun
    then:
    - if:
      - condition: numeric_state
        entity_id: light.master_bathroom
        attribute: brightness
        below: 255
      then:
      - service: light.turn_on
        data:
          brightness: 255
          transition: 30
        target:
          entity_id: light.master_bathroom
    else:
    - service: light.turn_on
      data:
        brightness: 65
      target:
        entity_id: light.master_bathroom
  mode: single
- id: '1648230313760'
  alias: Bed Sensors
  description: turn on and off bed sensors with webhook from ifttt
  trigger:
  - platform: webhook
    webhook_id: bed_sensor_mark_off
    id: mark off
  - platform: webhook
    webhook_id: bed_sensor_mark_on
    id: mark on
  - platform: webhook
    webhook_id: bed_sensor_holly_off
    id: holly off
  - platform: webhook
    id: holly on
    webhook_id: bed_sensor_holly_on
  - platform: state
    entity_id:
    - binary_sensor.withings_in_bed_holly
    to: 'on'
    id: holly on
  - platform: state
    entity_id:
    - binary_sensor.withings_in_bed_holly
    from: 'on'
    id: holly off
  - platform: state
    entity_id:
    - binary_sensor.withings_in_bed_mark
    to: 'on'
    id: mark on
  - platform: state
    entity_id:
    - binary_sensor.withings_in_bed_mark
    from: 'on'
    id: mark off
  - platform: webhook
    webhook_id: bed-sensors-d1jJhPAxx0jyIv8X-xkxkJJq
    id: mark off
  - platform: webhook
    webhook_id: bed-sensors-yYI0gje9kR7UgsQpidE2Fe5g
    id: mark on
  - platform: webhook
    webhook_id: bed-sensors-6GEBCdj2WBsfpsWPxZyN6-xK
    id: holly off
  - platform: webhook
    webhook_id: bed-sensors-An9N8ObEgERMN8J_0SF55T_v
    id: holly on
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: mark off
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.bed_mark
    - conditions:
      - condition: trigger
        id: mark on
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.bed_mark
    - conditions:
      - condition: trigger
        id: holly off
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.bed_holly
    - conditions:
      - condition: trigger
        id: holly on
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.bed_holly
  mode: single
- id: '1674762589678'
  alias: Coffee Announcement
  description: ask if i want coffee to brew
  trigger:
  - platform: state
    entity_id:
    - light.basement
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 2
    id: basement coffee
  - platform: event
    event_type: alexa_actionable_notification
    event_data:
      event_id: basement_coffee_event
      event_response_type: ResponseYes
    id: basement yes
  - platform: event
    event_type: alexa_actionable_notification
    event_data:
      event_id: basement_coffee_event
      event_response_type: ResponseNo
    id: Basement no
  - platform: state
    entity_id:
    - light.coffee_light
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 2
    id: upstairs coffee
  - platform: event
    event_type: alexa_actionable_notification
    event_data:
      event_id: upstairs_coffee_event
      event_response_type: ResponseYes
    id: upstairs yes
  - platform: event
    event_type: alexa_actionable_notification
    event_data:
      event_id: upstairs_coffee_event
      event_response_type: ResponseNo
    id: upstairs no
  - platform: time
    at: 00:00:00
    id: reset
  - platform: state
    entity_id:
    - input_boolean.bed_mark
    to: 'off'
    id: upstairs coffee
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: basement coffee
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.basement_coffee_ready
          state: 'on'
        then:
        - service: script.activate_alexa_actionable_notification
          data:
            text: Would you like me to start the coffee?
            event_id: basement_coffee_event
            alexa_device: media_player.basement_echo
        else:
        - service: notify.alexa_media
          data:
            message: If you want coffee, you will need to brew it yourself!
            target:
            - media_player.basement_echo
            data:
              type: tts
    - conditions:
      - condition: trigger
        id: basement yes
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.basement_coffee_plug
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.basement_coffee_ready
      - service: notify.alexa_media
        data:
          message: Coffee should be ready in a few minutes.  Remeber, Good to the
            last drop!
          target:
          - media_player.basement_echo
          data:
            type: tts
    - conditions:
      - condition: trigger
        id: Basement no
      sequence:
      - service: notify.alexa_media
        data:
          message: NO coffee for you
          target:
          - media_player.basement_echo
          data:
            type: tts
    - conditions:
      - condition: trigger
        id: upstairs coffee
      - condition: and
        conditions:
        - condition: state
          entity_id: input_boolean.coffee_ran
          state: 'off'
        - condition: time
          after: 04:00:00
          weekday:
          - sun
          - mon
          - tue
          - wed
          - thu
          - fri
          - sat
          before: '10:00:00'
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.upstairs_coffee_ready
          state: 'on'
        then:
        - service: script.activate_alexa_actionable_notification
          data:
            text: Would you like me to start the coffee?
            event_id: upstairs_coffee_event
            alexa_device: media_player.master_echo
        else:
        - service: notify.alexa_media
          data:
            message: If you want coffee, you will need to brew it yourself!
            target:
            - media_player.master_echo
            data:
              type: tts
    - conditions:
      - condition: trigger
        id: upstairs yes
      - condition: and
        conditions:
        - condition: state
          entity_id: input_boolean.coffee_ran
          state: 'off'
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.upstairs_coffee_plug
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.upstairs_coffee_ready
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.coffee_ran
      - service: notify.alexa_media
        data:
          message: Coffee should be ready in 5 minutes
          target:
          - media_player.master_echo
          data:
            type: tts
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - service: script.moon_lamp_on
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 0
          milliseconds: 250
      - service: script.moon_lamp_5
        data: {}
      - service: notify.alexa_media
        data:
          message: Best part of waking up is folders in your cup.  You got it coffee
            is ready.
          target:
          - media_player.master_echo
          data:
            type: tts
    - conditions:
      - condition: trigger
        id: upstairs no
      sequence:
      - service: notify.alexa_media
        data:
          message: I won't turn on the coffee.
          target:
          - media_player.master_echo
          data:
            type: tts
    - conditions:
      - condition: trigger
        id: reset
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.coffee_ran
  mode: single
- id: '1674863381231'
  alias: Medication
  description: Medication reminders and button for Mark
  trigger:
  - platform: device
    domain: mqtt
    device_id: 3095f9764282f79dc9005d1bbea59b24
    type: click
    subtype: single
    discovery_id: 0x00158d0008836ef3 click_single
    id: morning
  - platform: device
    domain: mqtt
    device_id: 3095f9764282f79dc9005d1bbea59b24
    type: click
    subtype: double
    discovery_id: 0x00158d0008836ef3 click_double
    id: evening
  - platform: time
    at: 00:00:00
    id: reset
  - platform: numeric_state
    entity_id: sensor.medicine_button_battery
    below: 10
    id: battery low
  - platform: device
    domain: mqtt
    device_id: 3095f9764282f79dc9005d1bbea59b24
    type: action
    subtype: hold
    discovery_id: 0x00158d0008836ef3 action_hold
    id: shot
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: morning
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.morning_pill
    - conditions:
      - condition: trigger
        id: evening
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.evening_pill
    - conditions:
      - condition: trigger
        id: reset
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id:
          - input_boolean.evening_pill
          - input_boolean.morning_pill
          - input_boolean.morning_shot
    - conditions:
      - condition: trigger
        id: battery low
      sequence:
      - service: notify.persistent_notification
        data:
          message: Medicine Button (green bathroom cabinet)
          title: REPLACE BATTERY (1 x CR2032)
      - service: notify.email
        data:
          message: Medicine Button
          title: BATTERY CR2032
          target:
          - 3305243522@vtext.com
    - conditions:
      - condition: trigger
        id: shot
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.morning_shot
  mode: single
- id: '1674908931703'
  alias: Upstairs Staircase Motion Lights
  description: turn lights on and off and adjust brightness accordingly
  trigger:
  - type: motion
    platform: device
    device_id: 16448126bb7fb093b14b4ce09f5db115
    entity_id: binary_sensor.upstairs_staircase_motion_sensor_occupancy
    domain: binary_sensor
    id: motion yes
  - type: no_motion
    platform: device
    device_id: 16448126bb7fb093b14b4ce09f5db115
    entity_id: binary_sensor.upstairs_staircase_motion_sensor_occupancy
    domain: binary_sensor
    id: motion no
  - platform: numeric_state
    entity_id: sensor.upstairs_staircase_motion_sensor_battery
    below: 10
    id: low battery
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: motion yes
      sequence:
      - if:
        - condition: state
          entity_id: light.upstairs_office
          state: 'on'
        then:
        - service: input_boolean.turn_on
          entity_id: input_boolean.upstairs_office_light_status
        else:
        - if:
          - condition: sun
            before: sunset
            after: sunrise
          then:
          - if:
            - condition: state
              entity_id: light.upstairs_office
              state: 'off'
            then:
            - service: light.turn_on
              data:
                brightness_pct: 100
              target:
                entity_id: light.upstairs_office
          else:
          - if:
            - condition: state
              entity_id: light.upstairs_office
              state: 'off'
            then:
            - service: light.turn_on
              data:
                brightness_pct: 25
              target:
                entity_id: light.upstairs_office
    - conditions:
      - condition: trigger
        id: motion no
      sequence:
      - delay:
          hours: 0
          minutes: 1
          seconds: 0
          milliseconds: 0
      - if:
        - condition: state
          entity_id: input_boolean.upstairs_office_light_status
          state: 'on'
        then:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.upstairs_office_light_status
        else:
        - service: light.turn_off
          data: {}
          target:
            entity_id: light.upstairs_office
    - conditions:
      - condition: trigger
        id: low battery
      sequence:
      - service: notify.persistent_notification
        data:
          title: REPLACE BATTERY (1 x CR2450)
          message: Upstairs Staircase Motion Sensor
      - service: notify.email
        data:
          message: Upstairs Staircase Motion Sensor
          title: BATTERY CR2450
          target:
          - 3305243522@vtext.com
  mode: single
- id: '1674909942174'
  alias: Appliance Cabinet Light
  description: Turn hall light on/off if not on when getting into cabinet
  trigger:
  - type: opened
    platform: device
    device_id: 24221612906e27383ccbec76180ba4dd
    entity_id: binary_sensor.appliance_cabinet_door_sensor_contact
    domain: binary_sensor
    id: appliance open
  - type: not_opened
    platform: device
    device_id: 24221612906e27383ccbec76180ba4dd
    entity_id: binary_sensor.appliance_cabinet_door_sensor_contact
    domain: binary_sensor
    id: appliance closed
  - type: bat_low
    platform: device
    device_id: 24221612906e27383ccbec76180ba4dd
    entity_id: binary_sensor.appliance_cabinet_door_sensor_battery_low
    domain: binary_sensor
    id: low battery
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: appliance open
      sequence:
      - if:
        - condition: state
          entity_id: light.hallway
          state: 'off'
        then:
        - service: light.turn_on
          data:
            brightness_pct: 100
          target:
            entity_id: light.hallway
        else:
        - service: automation.turn_off
          data:
            stop_actions: false
          target:
            entity_id: automation.appliance_cabinet_light
    - conditions:
      - condition: trigger
        id: appliance closed
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 10
          milliseconds: 0
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.hallway
    - conditions:
      - condition: trigger
        id: low battery
      sequence:
      - service: notify.persistent_notification
        data:
          message: Appliance Cabinet Sensor
          title: REPLACE BATTERY (1 x CR2032)
      - service: notify.email
        data:
          message: Appliance Cabinet Sensor
          title: BATTERY CR2032
          target:
          - 3305243522@vtext.com
  mode: restart
- id: '1674951893060'
  alias: Turn Motion Sensor On/Off
  description: Turn upstairs motion sensor off or on at night
  trigger:
  - platform: state
    entity_id:
    - input_boolean.bed_holly
    - input_boolean.bed_mark
    to: 'on'
    id: 'On'
    enabled: true
  - platform: state
    entity_id:
    - input_boolean.bed_holly
    - input_boolean.bed_mark
    - light.upstairs_office
    to: 'off'
    id: 'Off'
    enabled: true
  - platform: state
    entity_id:
    - light.upstairs_office
    to: 'on'
    id: manual on
    enabled: false
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'On'
      sequence:
      - if:
        - condition: and
          conditions:
          - condition: state
            entity_id: input_boolean.bed_holly
            state: 'on'
          - condition: state
            entity_id: input_boolean.bed_mark
            state: 'on'
          - condition: state
            entity_id: input_boolean.house_guest
            state: 'off'
        then:
        - service: automation.turn_off
          data:
            stop_actions: false
          target:
            entity_id:
            - automation.upstairs_staircase_motion_lights
            - automation.upstairs_staircase_motion_manual_override
        - service: light.turn_off
          data: {}
          target:
            entity_id: light.upstairs_office
        - service: fan.turn_off
          data: {}
          target:
            entity_id: fan.family_fan
        - if:
          - condition: time
            after: '18:00:00'
            before: '23:59:59'
            weekday:
            - sat
            - fri
            - thu
            - wed
            - tue
            - mon
            - sun
          then:
          - service: light.turn_off
            data: {}
            target:
              entity_id: '{% set reject = [ ''master_fan'', ''holly_lamp'', ''whole_house''
                ] %} {{ states.light | rejectattr(''object_id'', ''in'', reject) |
                selectattr(''state'',''eq'',''on'') | map(attribute=''entity_id'')
                | list }}

                '
          - delay:
              hours: 0
              minutes: 0
              seconds: 5
              milliseconds: 0
          - service: light.turn_off
            data: {}
            target:
              entity_id: '{% set reject = [ ''master_fan'', ''holly_lamp'', ''whole_house''
                ] %} {{ states.light | rejectattr(''object_id'', ''in'', reject) |
                selectattr(''state'',''eq'',''on'') | map(attribute=''entity_id'')
                | list }}

                '
    - conditions:
      - condition: trigger
        id: 'Off'
      sequence:
      - if:
        - condition: or
          conditions:
          - condition: state
            entity_id: input_boolean.bed_holly
            state: 'off'
          - condition: state
            entity_id: input_boolean.bed_mark
            state: 'off'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id:
            - automation.upstairs_staircase_motion_lights
            - automation.upstairs_staircase_motion_manual_override
    - conditions:
      - condition: trigger
        id: manual on
      sequence:
      - if:
        - condition: state
          entity_id: binary_sensor.upstairs_staircase_motion_sensor_occupancy
          state: 'off'
        - condition: and
          conditions:
          - condition: or
            conditions:
            - condition: state
              entity_id: input_boolean.bed_holly
              state: 'off'
            - condition: state
              entity_id: input_boolean.bed_mark
              state: 'off'
        then:
        - service: automation.turn_off
          data:
            stop_actions: false
          target:
            entity_id: automation.upstairs_staircase_motion_lights
  mode: single
- id: '1674997041729'
  alias: Battery Check
  description: check batteryies in devices without HA automations
  trigger:
  - platform: time
    at: 05:05:00
  condition: []
  action:
  - if:
    - condition: numeric_state
      entity_id: sensor.garage_motion_sensor_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Garage Motion Sensor
        title: BATTERY REPLACE (2 x AA)
    - service: notify.email
      data:
        message: Garage Motion Sensor
        title: BATTERY 2xAA
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.breezeway_motion_sensor_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Breezeway Motion Sensor
        title: BATTERY REPLACE (2 x AAA)
    - service: notify.email
      data:
        message: Breezeway Motion Sensor
        title: BATTERY 2xAAA
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.bstaircase_motion_sensor_d_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Basement Staircase Motion Sensor (on wall)
        title: BATTERY REPLACE (2 x AAA)
    - service: notify.email
      data:
        message: Basement Staircase Motion Sensor (on wall
        title: BATTERY 2xAAA
        target:
        - 3305243533@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.bstaircase_motion_sensor_u_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Basement Staircase Motion Sensor (on ceiling)
        title: BATTERY REPLACE (2 x AAA)
    - service: notify.email
      data:
        message: Basement Staircase Motion Sensor (on ceiling)
        title: BATTERY 2xAAA
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.basement_office_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Basement Office Switch
        title: BATTERY REPLACE (1 x CR2032)
    - service: notify.email
      data:
        message: Basement Office Switch
        title: BATTERY CR2032
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.breezeway_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Breezeway Switch
        title: BATTERY REPLACE (1 x CR2450)
    - service: notify.email
      data:
        message: Breezeway Switch
        title: BATTERY CR2450
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.kitchen_bw_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Kitchen Switch (by breezeway)
        title: BATTERY REPLACE (1 x CR2032)
    - service: notify.email
      data:
        message: Kitchen Switch (by breezeway)
        title: BATTERY CR2032
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.kitchen_uc_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Kitchen Switch (by living room)
        title: BATTERY REPLACE (1 x CR2032)
    - service: notify.email
      data:
        message: Kitchen Switch (by living room)
        title: BATTERY CR2032
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.kitchen_cabinet_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Kitchen Cabinet Switch (above dishwasher)
        title: BATTERY REPLACE (1 x CR2450)
    - service: notify.email
      data:
        message: Kitchen Cabinet Switch (above dishwasher)
        title: BATTERY CR2450
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.living_room_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Living Room Switch
        title: BATTERY REPLACE (1 x CR2450)
    - service: notify.email
      data:
        message: Living Room Switch
        title: BATTERY CR2450
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.guest_room_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Guest Room Switch (under lamp)
        title: BATTERY REPLACE (1 x CR2450)
    - service: notify.email
      data:
        message: Guest Room Switch
        title: BATTERY CR2450
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.hallway_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Hallway Switch
        title: BATTERY REPLACE (1 x CR2450)
    - service: notify.email
      data:
        message: Hallway Switch
        title: BATTERY CR2450
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.family_room_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Family Room Switch (back end table)
        title: BATTERY REPLACE (1 x CR2450)
    - service: notify.email
      data:
        message: Family Room Switch
        title: BATTERY CR2450
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.upstairs_hw_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Upstairs Staircase Switch (by family room)
        title: BATTERY REPLACE (1 x CR2032)
    - service: notify.email
      data:
        message: Upstairs Staircase Switch (by family room)
        title: BATTERY CR2032
        target:
        - 3305243522@vtext.com
  - if:
    - condition: numeric_state
      entity_id: sensor.upstairs_ms_switch_battery
      below: 10
    then:
    - service: notify.persistent_notification
      data:
        message: Upstairs Staircase Switch (by master bedroom)
        title: BATTERY REPLACE (1 x CR2032)
    - service: notify.email
      data:
        message: Upstairs Staircase Switch (by guitar)
        title: BATTERY CR2032
        target:
        - 3305243522@vtext.com
  mode: single
- id: '1675004302217'
  alias: Basement Motion
  description: turn basement lights on according to motion and time, also low battery
    message
  trigger:
  - type: motion
    platform: device
    device_id: 7a34529b2e6e14258d25a1110270df94
    entity_id: binary_sensor.basement_motion_sensor_occupancy
    domain: binary_sensor
    id: motion
  - platform: numeric_state
    entity_id: sensor.basement_motion_sensor_battery
    below: 10
    id: low battery
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: motion
      sequence:
      - if:
        - condition: time
          before: '20:00:00'
          after: 06:00:00
          weekday:
          - sun
          - mon
          - tue
          - wed
          - thu
          - fri
          - sat
        then:
        - service: light.turn_on
          data:
            brightness_pct: 100
          target:
            entity_id: light.basement
    - conditions:
      - condition: trigger
        id: low battery
      sequence:
      - service: notify.persistent_notification
        data:
          message: Basement Motion Sensor
          title: BATTERY REPLACE (1 x CR2450)
      - service: notify.email
        data:
          message: Basement Motion Sensor
          title: BATTERY CR2450
          target:
          - 3305243522@vtext.com
  mode: single
- id: '1675005772753'
  alias: Medicine Reminder
  description: remind mark to take medicine
  trigger:
  - platform: time
    at: 07:00:00
    id: morning
  - platform: time
    at: '19:00:00'
    id: evening
  - platform: time
    at: 08:00:00
    id: shot
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: morning
      - condition: state
        entity_id: input_boolean.morning_pill
        state: 'off'
      sequence:
      - repeat:
          until:
          - condition: state
            entity_id: input_boolean.morning_pill
            state: 'on'
          sequence:
          - service: script.text_mark_medicine
            data: {}
    - conditions:
      - condition: trigger
        id: evening
      - condition: state
        entity_id: input_boolean.evening_pill
        state: 'off'
      sequence:
      - repeat:
          until:
          - condition: state
            entity_id: input_boolean.evening_pill
            state: 'on'
          sequence:
          - service: script.text_mark_medicine
            data: {}
    - conditions:
      - condition: trigger
        id: shot
      - condition: state
        entity_id: input_boolean.morning_shot
        state: 'off'
      sequence:
      - repeat:
          while:
          - condition: state
            entity_id: input_boolean.morning_shot
            state: 'off'
          sequence:
          - service: script.mark_shot_notification
            data: {}
  mode: single
- id: '1675268056074'
  alias: Zone Mark
  description: run scripts when mark leaves and comes back home
  trigger:
  - platform: zone
    entity_id: person.mark
    zone: zone.geofence
    event: enter
    id: arrive
  - platform: zone
    entity_id: person.mark
    zone: zone.home
    event: leave
    id: leave
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: arrive
      sequence:
      - service: lock.unlock
        data: {}
        target:
          entity_id: lock.garage_door
      - if:
        - condition: state
          entity_id: input_text.mark_driving
          state: Blue
        then:
        - if:
          - condition: state
            entity_id: binary_sensor.blue_garage_door_sensor_contact
            state: 'off'
          then:
          - service: script.blue_door
            data: {}
        else:
        - if:
          - condition: state
            entity_id: binary_sensor.green_garage_door_sensor_contact
            state: 'off'
          then:
          - service: script.green_door
            data: {}
      - service: automation.turn_off
        data:
          stop_actions: true
        target:
          entity_id: automation.mark_zone
    - conditions:
      - condition: trigger
        id: leave
      sequence:
      - service: lock.lock
        data: {}
        target:
          entity_id: lock.house_locks
      - if:
        - condition: state
          entity_id: input_text.mark_driving
          state: Blue
        then:
        - if:
          - condition: state
            entity_id: binary_sensor.blue_garage_door_sensor_contact
            state: 'on'
          then:
          - service: script.blue_door
            data: {}
          else: []
        else:
        - if:
          - condition: state
            entity_id: binary_sensor.green_garage_door_sensor_contact
            state: 'on'
          then:
          - service: script.green_door
            data: {}
  mode: single
- id: '1675278357388'
  alias: Low Battery Level Check
  description: check for batteries under 10% and text mark
  use_blueprint:
    path: sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
    input:
      threshold: 10
      exclude:
        entity_id:
        - sensor.sm_a115a_battery_level
        - sensor.sm_g960u_battery_level
        - sensor.sm_n960u_battery_level
        - sensor.mark_s_ipad_battery_level
        - sensor.alice_battery_level
        - sensor.benson_battery_level
        - sensor.iphone_battery_level
        - sensor.lurch_battery_level
        - sensor.mister_belvedere_battery_level
        - sensor.rosie_battery_level
      actions:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id:
          - input_boolean.kill_switch_battery_check
      time: 06:00:00
- id: '1675279703186'
  alias: Morning Briefing Holly
  description: Briefing Holly on mornings going to work.
  trigger:
  - platform: state
    entity_id:
    - light.breezeway
    to: 'on'
  condition:
  - condition: time
    before: 04:45:00
    after: 04:10:00
    weekday:
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
    - sun
  - type: is_motion
    condition: device
    device_id: 0febc8b3d4ac4b8ddb08bd6b0848ee73
    entity_id: binary_sensor.breezeway_motion_sensor_motion
    domain: binary_sensor
  action:
  - service: script.leaving_house_holly
    data: {}
    enabled: true
  - delay:
      hours: 0
      minutes: 0
      seconds: 3
      milliseconds: 0
  - service: script.morning_briefing_holly
    data: {}
  mode: single
- id: '1675280095669'
  alias: Zone Holly
  description: run scripts when holly leaves and comes back home
  trigger:
  - platform: zone
    entity_id: person.holly
    zone: zone.geofence
    event: enter
    id: arrive
  - platform: zone
    entity_id: person.holly
    zone: zone.home
    event: leave
    id: leave
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: arrive
      sequence:
      - service: lock.unlock
        data: {}
        target:
          entity_id: lock.garage_door
      - if:
        - condition: state
          entity_id: input_text.holly_driving
          state: Blue
        then:
        - if:
          - condition: state
            entity_id: binary_sensor.blue_garage_door_sensor_contact
            state: 'off'
          then:
          - service: script.blue_door
            data: {}
        else:
        - if:
          - condition: state
            entity_id: binary_sensor.green_garage_door_sensor_contact
            state: 'off'
          then:
          - service: script.green_door
            data: {}
      - service: automation.turn_off
        data:
          stop_actions: false
        target:
          entity_id: automation.holly_zone
    - conditions:
      - condition: trigger
        id: leave
      sequence:
      - service: lock.lock
        data: {}
        target:
          entity_id: lock.house_locks
      - if:
        - condition: state
          entity_id: input_text.holly_driving
          state: Blue
        then:
        - if:
          - condition: state
            entity_id: binary_sensor.blue_garage_door_sensor_contact
            state: 'on'
          then:
          - service: script.blue_door
            data: {}
          else: []
        else:
        - if:
          - condition: state
            entity_id: binary_sensor.green_garage_door_sensor_contact
            state: 'on'
          then:
          - service: script.green_door
            data: {}
  mode: single
- id: '1672086518949'
  alias: Tag Scanned Person
  description: record last person to scan NFC tag
  trigger:
  - platform: event
    event_type: tag_scanned
  condition: []
  action:
  - service: input_text.set_value
    data:
      value: "{% set person = states.person|selectattr('attributes.user_id', 'eq',
        \n  trigger.event.context.user_id)|first %}{{ person.attributes.friendly_name
        }}"
    target:
      entity_id: input_text.who_is_this
  mode: single
- id: '1675345811153'
  alias: Who Is Driving What Car
  description: set input booleans for who is driving what car for garage door automation
  trigger:
  - platform: tag
    tag_id: Green car
    id: green_tag
  - platform: tag
    tag_id: blue car
    id: blue_tag
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: green_tag
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 500
      - if:
        - condition: state
          entity_id: input_text.who_is_this
          state: Holly
        then:
        - service: input_text.set_value
          data:
            value: Green
          target:
            entity_id: input_text.holly_driving
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.holly_zone
        else:
        - service: input_text.set_value
          data:
            value: Green
          target:
            entity_id: input_text.mark_driving
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.mark_zone
    - conditions:
      - condition: trigger
        id: blue_tag
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 500
      - if:
        - condition: state
          entity_id: input_text.who_is_this
          state: Holly
        then:
        - service: input_text.set_value
          data:
            value: Blue
          target:
            entity_id: input_text.holly_driving
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.holly_zone
        else:
        - service: input_text.set_value
          data:
            value: Blue
          target:
            entity_id: input_text.mark_driving
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.mark_zone
  mode: single
- id: '1675440420356'
  alias: Zone Disabled When Home
  description: Disable zone automations when everyone is home.
  trigger:
  - platform: state
    entity_id:
    - group.family_everyone
    to: home
    for:
      hours: 0
      minutes: 15
      seconds: 0
  condition: []
  action:
  - service: automation.turn_off
    data:
      stop_actions: false
    target:
      entity_id:
      - automation.holly_zone
      - automation.mark_zone
  mode: single
- id: '1675545910170'
  alias: Aqara Magic Cube
  description: ''
  use_blueprint:
    path: rvaidya/aqara_magic_cube.yaml
    input:
      remote: 84915f011f53ba8ccf76bcfb5aea9765
      active_face: input_number.cube_face
      flip_90: false
      cube_flip_90: []
      cube_flip_1:
      - service: notify.alexa_media_family_echo
        data:
          data:
            type: tts
          message: kitchen lights
      cube_shake:
      - service: remote.toggle
        data:
          activity: Fire Stick
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
      slide_any_side: false
      cube_slide_any: []
      knock_any_side: false
      cube_knock_any: []
      rotate_any_side: false
      rotate_right: []
      rotate_left: []
      flip_any: true
      cube_flip_2:
      - service: notify.alexa_media_family_echo
        data:
          message: lamp controls
          data:
            type: tts
      cube_flip_3:
      - service: notify.alexa_media_family_echo
        data:
          message: ceiling fan controls
          data:
            type: tts
      cube_flip_4:
      - service: notify.alexa_media_family_echo
        data:
          message: TV Controls
          data:
            type: tts
      cube_flip_5:
      - service: notify.alexa_media_family_echo
        data:
          message: Volume Controls
          data:
            type: tts
      cube_flip_6: []
      one_to_one:
      - service: light.toggle
        data: {}
        target:
          entity_id: light.kitchen
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.kitchen_cabinets
      slide_on_one:
      - service: light.toggle
        data: {}
        target:
          entity_id: light.kitchen
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.kitchen_cabinets
      slide_on_two:
      - service: light.toggle
        data: {}
        target:
          entity_id: light.family_room_lamp
      rotate_left_side_2:
      - service: light.turn_on
        data:
          brightness_step_pct: -10
        target:
          device_id: 49084123033ed91e58adc6cb4de7ccd8
      rotate_right_side_2:
      - service: light.turn_on
        data:
          brightness_step_pct: 10
        target:
          device_id: 49084123033ed91e58adc6cb4de7ccd8
      rotate_right_side_1:
      - service: light.turn_on
        data:
          brightness_step_pct: 10
        target:
          device_id: 9f78db1000747c0e134c3ed2c91f8e7d
      rotate_left_side_1:
      - service: light.turn_on
        data:
          brightness_step_pct: 10
        target:
          device_id: 9f78db1000747c0e134c3ed2c91f8e7d
      two_to_two:
      - service: light.toggle
        data: {}
        target:
          device_id: 49084123033ed91e58adc6cb4de7ccd8
      three_to_three:
      - service: light.toggle
        data: {}
        target:
          entity_id: light.family_fan
      slide_on_three:
      - service: fan.toggle
        data: {}
        target:
          device_id: 5aa26700165cc6f66821bff5d98c980b
      rotate_left_side_3:
      - service: fan.decrease_speed
        data: {}
        target:
          device_id: 5aa26700165cc6f66821bff5d98c980b
      rotate_right_side_3:
      - service: fan.increase_speed
        data: {}
        target:
          device_id: 5aa26700165cc6f66821bff5d98c980b
      four_to_four:
      - service: remote.send_command
        data:
          device: '75304590'
          command: Play
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
      slide_on_four:
      - service: remote.send_command
        data:
          device: '75304590'
          command: Stop
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
      rotate_left_side_4:
      - service: remote.send_command
        data:
          device: '75304590'
          command: SkipBack
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
      rotate_right_side_4:
      - service: remote.send_command
        data:
          device: '75304590'
          command: SkipForward
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
      slide_on_five:
      - service: remote.send_command
        data:
          device: '50980901'
          command: Mute
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
      rotate_left_side_5:
      - service: remote.send_command
        data:
          device: '50980901'
          command: VolumeDown
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
      rotate_right_side_5:
      - service: remote.send_command
        data:
          device: '50980901'
          command: VolumeUp
        target:
          device_id: 88f67465a2e48f4b8dc487a33c4dccc7
- id: '1675697412917'
  alias: Chores
  description: tag scan and reset for sweeper cleaning
  trigger:
  - platform: tag
    tag_id: f7577aa9-8551-437d-a8c8-b9f061ff59b4
    id: alice
  - platform: tag
    tag_id: 08a34285-3566-4cca-84a7-3ec8d59bdd65
    id: benson
  - platform: tag
    tag_id: cdc34858-ca44-4603-ad44-537bfe3ae610
    id: lurch
  - platform: tag
    tag_id: 699f74f7-9f79-4726-960c-30ab726134c9
    id: belvedere
  - platform: tag
    tag_id: 70079f5e-4605-4fdb-acaa-2eb8acccdb92
    id: rosie
  - platform: time
    at: 00:15:00
    id: daily reset
  - platform: state
    entity_id:
    - input_boolean.water_fountain_change
    id: fountain count
  - platform: template
    value_template: '{{ now().weekday() == 0 }}'
    id: Monday
  - platform: template
    value_template: '{{ now().weekday() == 1 }}'
    id: Tuesday
  - platform: template
    value_template: '{{ now().weekday() == 2 }}'
    id: Wednesday
  - platform: template
    value_template: '{{ now().weekday() == 3 }}'
    id: Thursday
  - platform: template
    value_template: '{{ now().weekday() == 4 }}'
    id: Friday
  - platform: template
    value_template: '{{ now().weekday() == 5 }}'
    id: Saturday
  - platform: template
    value_template: '{{ now().weekday() == 6 }}'
    id: Sunday
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: alice
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.clean_alice
    - conditions:
      - condition: trigger
        id: benson
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.clean_benson
    - conditions:
      - condition: trigger
        id: lurch
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.clean_lurch
    - conditions:
      - condition: trigger
        id: belvedere
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.clean_mr_belvedere
    - conditions:
      - condition: trigger
        id: rosie
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.clean_rosie
    - conditions:
      - condition: trigger
        id: Monday
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id:
          - input_boolean.clean_alice
          - input_boolean.clean_benson
          - input_boolean.clean_lurch
          - input_boolean.clean_rosie
          - input_boolean.clean_mr_belvedere
    - conditions:
      - condition: trigger
        id: daily reset
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.water_fountain_clean
          state: 'off'
        then:
        - service: input_boolean.toggle
          data: {}
          target:
            entity_id: input_boolean.water_fountain_change
    - conditions:
      - condition: trigger
        id: Tuesday
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id:
          - input_boolean.clean_steps
          - input_boolean.dust_house
    - conditions:
      - condition: trigger
        id: fountain count
      sequence:
      - if:
        - condition: numeric_state
          entity_id: counter.water_fountain_count
          below: 10
        then:
        - service: counter.increment
          data: {}
          target:
            entity_id: counter.water_fountain_count
        else:
        - service: counter.reset
          data: {}
          target:
            entity_id: counter.water_fountain_count
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.water_fountain_clean
    - conditions:
      - condition: trigger
        id: Wednesday
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id:
          - input_boolean.sweep_furniture
          - input_boolean.clean_ceiling_fans
    - conditions:
      - condition: trigger
        id: Thursday
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.clean_master_bathroom
    - conditions:
      - condition: trigger
        id: Friday
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.clean_green_bathroom
  mode: single
- id: '1675972683768'
  alias: Tag Assistance
  description: call for help when scanned one in each car
  trigger:
  - platform: tag
    tag_id: Assistance Required
  condition: []
  action:
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: media_player.play_media
    data:
      media_content_id: announce " {{ states('input_text.who_is_this') }} needs help!
        "
      media_content_type: custom
    target:
      entity_id: media_player.portable_echo
  mode: single
- id: '1676415940910'
  alias: Porch Lights
  description: Turn on off porch light
  trigger:
  - platform: sun
    event: sunset
    offset: '-10:00'
  condition: []
  action: []
  mode: single
- id: '1676664698357'
  alias: Working in Basement Office
  description: turn lights off upstairs when holly not home and mark working in basement
  trigger:
  - platform: state
    entity_id:
    - light.basement
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: person.mark
      state: home
    - condition: state
      entity_id: input_boolean.house_guest
      state: 'off'
    - condition: not
      conditions:
      - condition: state
        entity_id: person.holly
        state: home
  action:
  - service: light.turn_off
    data: {}
    target:
      entity_id: '{% set reject = [ ''basement'', ''bobulb2'', ''bobulb1'', ''bobulb3'',
        ''whole_house'', ''wiz_bulb'' ] %} {{ states.light | rejectattr(''object_id'',
        ''in'', reject) | selectattr(''state'',''eq'',''on'') | map(attribute=''entity_id'')
        | list }}

        '
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: light.turn_off
    data: {}
    target:
      entity_id: '{% set reject = [ ''basement'', ''bobulb2'', ''bobulb1'', ''bobulb3'',
        ''whole_house'', ''wiz_bulb'' ] %} {{ states.light | rejectattr(''object_id'',
        ''in'', reject) | selectattr(''state'',''eq'',''on'') | map(attribute=''entity_id'')
        | list }}

        '
  mode: single
- id: '1676767954778'
  alias: Kill Switch
  description: stops automations that are misbehaving
  trigger:
  - platform: state
    entity_id:
    - input_boolean.kill_switch_appliance_cabinet_light
    id: appliance cabinet light
  - platform: state
    entity_id:
    - input_boolean.kill_switch_aqara_magic_cube
    id: Aqara Magic Cube
  - platform: state
    entity_id:
    - input_boolean.kill_switch_backup_failure_notification
    id: backup failure notification
  - platform: state
    entity_id:
    - input_boolean.kill_switch_basement_lights
    id: basement lights
  - platform: state
    entity_id:
    - input_boolean.kill_switch_basement_motion
    id: basement motion
  - platform: state
    entity_id:
    - input_boolean.kill_switch_battery_check
    id: battery check
  - platform: state
    entity_id:
    - input_boolean.kill_switch_coffee_announcement
    id: coffee announcement
  - platform: state
    entity_id:
    - input_boolean.kill_switch_coffee_button_press
    id: coffee button press
  - platform: state
    entity_id:
    - input_boolean.kill_switch_low_battery_level_check
    id: low battery level check
  - platform: state
    entity_id:
    - input_boolean.kill_switch_master_bathroom_light
    id: master bathroom light
  - platform: state
    entity_id:
    - input_boolean.kill_switch_medicine_reminder
    id: medicine reminder
  - platform: state
    entity_id:
    - input_boolean.kill_switch_morning_briefing_holly
    id: morning briefing holly
  - platform: state
    entity_id:
    - input_boolean.kill_switch_tag_assistance
    id: Tag Assistance
  - platform: state
    entity_id:
    - input_boolean.kill_switch_trash_reminder
    id: trash reminder
  - platform: state
    entity_id:
    - input_boolean.kill_switch_turn_motion_sensor_on_off
    id: turn motion sensor on/off
  - platform: state
    entity_id:
    - input_boolean.kill_switch_vaporizer_schedule
    id: Vaporizer Schedule
  - platform: state
    entity_id:
    - input_boolean.kill_switch_who_is_driving_what_car
    id: who is driving what car
  - platform: state
    entity_id:
    - input_boolean.kill_switch_working_in_basement_office
    id: working in basement office
  - platform: state
    entity_id:
    - input_boolean.kill_switch_zone_disabled_when_home
    id: zone disabled when home
  - platform: state
    entity_id:
    - input_boolean.kill_switch_zone_holly
    id: zone holly
  - platform: state
    entity_id:
    - input_boolean.kill_switch_zone_mark
    id: zone mark
  - platform: state
    entity_id:
    - input_boolean.kill_switch_upstairs_space_heater
    id: upstairs space heater
  - platform: state
    entity_id:
    - input_boolean.kill_switch_birthday_reminder_text
    id: birthday reminder text
  - platform: state
    entity_id:
    - input_boolean.kill_switch_morning_briefing_mark
    id: morning briefing mark
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: appliance cabinet light
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_appliance_cabinet_light
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id:
            - automation.appliance_cabinet_light
            - automation.appliance_cabinet_light_manual_override
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_appliance_cabinet_light
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id:
              - automation.appliance_cabinet_light
              - automation.appliance_cabinet_light_manual_override
    - conditions:
      - condition: trigger
        id: Aqara Magic Cube
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_aqara_magic_cube
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.aqara_magic_cube
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_aqara_magic_cube
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.aqara_magic_cube
    - conditions:
      - condition: trigger
        id: backup failure notification
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_backup_failure_notification
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.backup_failure_notification
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_backup_failure_notification
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.backup_failure_notification
    - conditions:
      - condition: trigger
        id: basement lights
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_basement_lights
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.basement_sink
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_basement_lights
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.basement_sink
    - conditions:
      - condition: trigger
        id: basement motion
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_basement_motion
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.basement_motion
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_basement_motion
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.basement_motion
    - conditions:
      - condition: trigger
        id: battery check
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_battery_check
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.battery_check
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_battery_check
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.battery_check
    - conditions:
      - condition: trigger
        id: coffee announcement
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_coffee_announcement
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.coffee_announcement
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_coffee_announcement
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.coffee_announcement
    - conditions:
      - condition: trigger
        id: coffee button press
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_coffee_button_press
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.basement_coffee_button
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_coffee_button_press
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.basement_coffee_button
    - conditions:
      - condition: trigger
        id: low battery level check
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_low_battery_level_check
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.low_battery_level_detection_notification_for_all_battery_sensors
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_low_battery_level_check
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.low_battery_level_detection_notification_for_all_battery_sensors
    - conditions:
      - condition: trigger
        id: master bathroom light
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_master_bathroom_light
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.master_bathroom_light
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_master_bathroom_light
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.master_bathroom_light
    - conditions:
      - condition: trigger
        id: medicine reminder
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_medicine_reminder
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.medicine_reminder_home
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_medicine_reminder
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.medicine_reminder_home
    - conditions:
      - condition: trigger
        id: morning briefing holly
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_morning_briefing_holly
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.holly_morning_briefing
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_morning_briefing_holly
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.holly_morning_briefing
    - conditions:
      - condition: trigger
        id: Tag Assistance
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_tag_assistance
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.test_assistance_tag
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_tag_assistance
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.test_assistance_tag
    - conditions:
      - condition: trigger
        id: trash reminder
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_trash_reminder
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.trash_reminder
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_trash_reminder
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.trash_reminder
    - conditions:
      - condition: trigger
        id: turn motion sensor on/off
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_turn_motion_sensor_on_off
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.turn_motion_sensor_off
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_turn_motion_sensor_on_off
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.turn_motion_sensor_off
    - conditions:
      - condition: trigger
        id: Vaporizer Schedule
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_vaporizer_schedule
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.vaporizer_schedule
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_vaporizer_schedule
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.vaporizer_schedule
    - conditions:
      - condition: trigger
        id: who is driving what car
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_who_is_driving_what_car
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.test_car_automation
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_who_is_driving_what_car
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.test_car_automation
    - conditions:
      - condition: trigger
        id: working in basement office
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_working_in_basement_office
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.working_in_basement_office
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_working_in_basement_office
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.working_in_basement_office
    - conditions:
      - condition: trigger
        id: zone disabled when home
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_zone_disabled_when_home
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.disable_zone_when_home
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_zone_disabled_when_home
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.disable_zone_when_home
    - conditions:
      - condition: trigger
        id: zone holly
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_zone_holly
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.holly_zone
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_zone_holly
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.holly_zone
    - conditions:
      - condition: trigger
        id: zone mark
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_zone_mark
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.mark_zone
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_zone_mark
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.mark_zone
    - conditions:
      - condition: trigger
        id: upstairs space heater
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_upstairs_space_heater
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.upstairs_space_heater
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_upstairs_space_heater
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.upstairs_space_heater
    - conditions:
      - condition: trigger
        id: birthday reminder text
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_birthday_reminder_text
          state: 'off'
        then:
        - service: automation.turn_off
          data:
            stop_actions: true
          target:
            entity_id: automation.birthday_reminder_text
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_birthday_reminder_text
            state: 'on'
          then:
          - service: automation.turn_on
            data: {}
            target:
              entity_id: automation.birthday_reminder_text
    - conditions:
      - condition: trigger
        id: morning briefing mark
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.kill_switch_morning_briefing_mark
          state: 'on'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.morning_briefing_mark
        else:
        - if:
          - condition: state
            entity_id: input_boolean.kill_switch_morning_briefing_mark
            state: 'off'
          then:
          - service: automation.turn_off
            data:
              stop_actions: true
            target:
              entity_id: automation.morning_briefing_mark
  mode: single
- id: '1676848009583'
  alias: Trash Reminder
  description: Reminder to take out trash
  trigger:
  - platform: calendar
    event: start
    offset: 0:0:0
    entity_id: calendar.trash
    id: Trash Day
  - platform: time
    at: '17:00:00'
    id: announcement
  - platform: event
    event_type: alexa_actionable_notification
    event_data:
      event_id: trash_can_event
      event_response_type: ResponseYes
    id: 'Yes'
  - platform: event
    event_type: alexa_actionable_notification
    event_data:
      event_id: trash_can_event
      event_response_type: ResponseNo
    id: 'No'
  - platform: event
    event_type: alexa_actionable_notification
    event_data:
      event_id: trash_can_event
      event_response_type: ResponseNone
    id: no answer
  - platform: tag
    tag_id: Trash Cans Done
    id: tag scan
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: Trash Day
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.trash_cans
    - conditions:
      - condition: trigger
        id: announcement
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.trash_cans
          state: 'on'
        then:
        - service: script.activate_alexa_actionable_notification
          data:
            text: Did you remember to put the trash cans out for pickup tomorrow?
            event_id: trash_can_event
            alexa_device: media_player.kitchen_echo
    - conditions:
      - condition: trigger
        id: 'Yes'
      sequence:
      - service: notify.alexa_media_kitchen_echo
        data:
          message: Good job you remembered!
          data:
            type: tts
    - conditions:
      - condition: trigger
        id: 'No'
      sequence:
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
      - if:
        - condition: state
          entity_id: input_boolean.trash_cans
          state: 'on'
        then:
        - service: script.activate_alexa_actionable_notification
          data:
            text: Did you remember to put the trash cans out for pickup tomorrow?
            event_id: trash_can_event
            alexa_device: media_player.kitchen_echo
        else:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.trash_cans
    - conditions:
      - condition: trigger
        id: no answer
      sequence:
      - service: notify.alexa_media
        data:
          message: '"<audio src=''https://markross.duckdns.org/local/images/tdirty.mp3''/>"'
          target:
          - media_player.family_echo
          - media_player.master_echo
          - media_player.basement_echo
          - media_player.kitchen_echo
          data:
            type: tts
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
      - if:
        - condition: state
          entity_id: input_boolean.trash_cans
          state: 'on'
        then:
        - service: script.activate_alexa_actionable_notification
          data:
            text: Did you remember to put the trash cans out for pickup tomorrow?
            event_id: trash_can_event
            alexa_device: media_player.kitchen_echo
        else:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.trash_cans
    - conditions:
      - condition: trigger
        id: tag scan
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.trash_cans
  mode: single
- id: '1677025316611'
  alias: Alarm Lights
  description: turn on lights when holly's phone alarm goes off
  trigger:
  - platform: template
    value_template: '{{now().strftime("%a %h %d %H:%M %Z %Y") == (((state_attr(''sensor.sm_g960u_next_alarm'',
      ''Time in Milliseconds'') | int / 1000)) | timestamp_custom(''%a %h %d %H:%M
      %Z %Y''))}}'
  condition:
  - condition: state
    entity_id: person.holly
    state: home
  action:
  - service: script.wakeup_master_lights
    data: {}
  mode: single
- id: '1678149826764'
  alias: Sweeper Schedule Alice
  description: Run Alice according to schedule time
  trigger:
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_alice'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_alice'', ''minute''))
      }}'
    id: start
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_alice'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_alice'', ''minute'')
      + 30) }}'
    id: stop
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: start
      sequence:
      - service: vacuum.start
        data: {}
        target:
          entity_id: vacuum.alice
    - conditions:
      - condition: trigger
        id: stop
      sequence:
      - service: vacuum.return_to_base
        data: {}
        target:
          entity_id: vacuum.alice
  mode: single
- id: '1678150112255'
  alias: Sweeper Out Of Service
  description: turn schedules on or off when out of service
  trigger:
  - platform: state
    entity_id:
    - input_boolean.sweeper_out_of_service_alice
    id: alice
    for:
      hours: 0
      minutes: 0
      seconds: 1
  - platform: state
    entity_id:
    - input_boolean.sweeper_out_of_service_benson
    id: benson
    for:
      hours: 0
      minutes: 0
      seconds: 2
  - platform: state
    entity_id:
    - input_boolean.sweeper_out_of_service_lurch
    id: lurch
  - platform: state
    entity_id:
    - input_boolean.sweeper_out_of_service_mister_belvedere
    id: mister belvedere
  - platform: state
    entity_id:
    - input_boolean.sweeper_out_of_service_rosie
    id: rosie
  - platform: state
    entity_id:
    - switch.visitors
    id: visitors
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: alice
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_alice
          state: 'on'
        then:
        - service: automation.turn_off
          data:
            stop_actions: true
          target:
            entity_id: automation.sweeper_schedule_alice
        else:
        - if:
          - condition: state
            entity_id: input_boolean.sweeper_out_of_service_alice
            state: 'off'
          then:
          - service: automation.turn_on
            data: {}
            target:
              entity_id: automation.sweeper_schedule_alice
    - conditions:
      - condition: trigger
        id: benson
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_benson
          state: 'on'
        then:
        - service: automation.turn_off
          data:
            stop_actions: true
          target:
            entity_id: automation.sweeper_schedule_benson
        else:
        - if:
          - condition: state
            entity_id: input_boolean.sweeper_out_of_service_benson
            state: 'off'
          then:
          - service: automation.turn_on
            data: {}
            target:
              entity_id: automation.sweeper_schedule_benson
    - conditions:
      - condition: trigger
        id: lurch
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_lurch
          state: 'on'
        then:
        - service: automation.turn_off
          data:
            stop_actions: true
          target:
            entity_id: automation.sweeper_schedule_lurch
        else:
        - if:
          - condition: state
            entity_id: input_boolean.sweeper_out_of_service_lurch
            state: 'off'
          then:
          - service: automation.turn_on
            data: {}
            target:
              entity_id: automation.sweeper_schedule_lurch
    - conditions:
      - condition: trigger
        id: mister belvedere
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_mister_belvedere
          state: 'on'
        then:
        - service: automation.turn_off
          data:
            stop_actions: true
          target:
            entity_id: automation.sweeper_schedule_mister_belvedere
        else:
        - if:
          - condition: state
            entity_id: input_boolean.sweeper_out_of_service_mister_belvedere
            state: 'off'
          then:
          - service: automation.turn_on
            data: {}
            target:
              entity_id: automation.sweeper_schedule_mister_belvedere
    - conditions:
      - condition: trigger
        id: rosie
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_rosie
          state: 'on'
        then:
        - service: automation.turn_off
          data:
            stop_actions: true
          target:
            entity_id: automation.sweeper_schedule_rosie
        else:
        - if:
          - condition: state
            entity_id: input_boolean.sweeper_out_of_service_rosie
            state: 'off'
          then:
          - service: automation.turn_on
            data: {}
            target:
              entity_id: automation.sweeper_schedule_rosie
    - conditions:
      - condition: trigger
        id: visitors
      sequence:
      - if:
        - condition: state
          entity_id: switch.visitors
          state: 'on'
        then:
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id:
            - input_boolean.sweeper_out_of_service_alice
            - input_boolean.sweeper_out_of_service_benson
        else:
        - if:
          - condition: state
            entity_id: switch.visitors
            state: 'off'
          then:
          - service: input_boolean.turn_off
            data: {}
            target:
              entity_id:
              - input_boolean.sweeper_out_of_service_alice
              - input_boolean.sweeper_out_of_service_benson
  mode: single
- id: '1678150791029'
  alias: Sweeper Schedule Benson
  description: Run Benson according to schedule time
  trigger:
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_benson'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_benson'', ''minute''))
      }}'
    id: start
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_benson'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_benson'', ''minute'')
      + 30) }}'
    id: stop
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: start
      sequence:
      - service: vacuum.start
        data: {}
        target:
          entity_id:
          - vacuum.benson
    - conditions:
      - condition: trigger
        id: stop
      sequence:
      - service: vacuum.return_to_base
        data: {}
        target:
          entity_id:
          - vacuum.benson
  mode: single
- id: '1678151282756'
  alias: Sweeper Schedule Lurch
  description: Run Lurch according to schedule time
  trigger:
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_lurch'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_lurch'', ''minute''))
      }}'
    id: start
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_lurch'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_lurch'', ''minute'')
      + 30) }}'
    id: stop
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: start
      sequence:
      - service: vacuum.start
        data: {}
        target:
          entity_id:
          - vacuum.lurch
    - conditions:
      - condition: trigger
        id: stop
      sequence:
      - if:
        - condition: not
          conditions:
          - condition: state
            entity_id: vacuum.lurch
            state: docked
        then:
        - service: vacuum.return_to_base
          data: {}
          target:
            device_id: 642c902db590aa21f71b69497f0ee024
  mode: single
- id: '1678151659675'
  alias: Sweeper Schedule Mister Belvedere
  description: Run Mister Belvedere according to schedule time
  trigger:
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_mister_belvedere'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_mister_belvedere'',
      ''minute'')) }}'
    id: start
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_mister_belvedere'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_mister_belvedere'',
      ''minute'') + 30) }}'
    id: stop
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: start
      sequence:
      - service: vacuum.start
        data: {}
        target:
          entity_id:
          - vacuum.mister_belvedere
    - conditions:
      - condition: trigger
        id: stop
      sequence:
      - service: vacuum.return_to_base
        data: {}
        target:
          entity_id:
          - vacuum.mister_belvedere
  mode: single
- id: '1678201858276'
  alias: Sweeper Schedule Rosie
  description: sweep floor and zone according to schedule for upstairs
  trigger:
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_rosie'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_rosie'', ''minute''))
      }}'
  - platform: template
    value_template: '{{ ((now().hour * 60) + (now().minute)) == ((state_attr(''input_datetime.sweeper_time_rosie'',
      ''hour'') * 60) + state_attr(''input_datetime.sweeper_time_rosie'', ''minute'')
      + 240) }}'
  condition: []
  action:
  - if:
    - condition: state
      entity_id: input_boolean.sweep_zone_office
      state: 'on'
    then:
    - service: media_player.play_media
      data:
        media_content_id: clean office
        media_content_type: routine
      target:
        entity_id: media_player.master_echo
    - service: input_boolean.toggle
      data: {}
      target:
        entity_id: input_boolean.sweep_zone_office
    else:
    - service: media_player.play_media
      data:
        media_content_id: clean master bedroom
        media_content_type: routine
      target:
        entity_id: media_player.master_echo
    - service: input_boolean.toggle
      data: {}
      target:
        entity_id: input_boolean.sweep_zone_office
  mode: single
- id: '1678402955371'
  alias: Washer Running
  description: turn on/off helper boolean for washng machine
  trigger:
  - type: power
    platform: device
    device_id: f4f40f8493b5a0c78dca7a00d6f210be
    entity_id: sensor.zooz_washer_switch_power_meter
    domain: sensor
    above: 1
    id: 'on'
  - type: power
    platform: device
    device_id: f4f40f8493b5a0c78dca7a00d6f210be
    entity_id: sensor.zooz_washer_switch_power_meter
    domain: sensor
    below: 0.5
    for:
      hours: 0
      minutes: 2
      seconds: 0
    id: 'off'
  - platform: state
    entity_id:
    - sensor.washer_vibration_sensor_action
    attribute: action
    to: tilt
    id: tilt
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id:
          - input_boolean.washer_running
          - input_boolean.washer_loaded
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.washer_running
    - conditions:
      - condition: trigger
        id: tilt
      sequence:
      - if:
        - type: is_power
          condition: device
          device_id: f4f40f8493b5a0c78dca7a00d6f210be
          entity_id: sensor.zooz_washer_switch_power_meter
          domain: sensor
          below: 1
        then:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.washer_loaded
  mode: single
- id: '1678994816045'
  alias: Morning Briefing Mark
  description: give morning report and status of sweepers
  trigger:
  - platform: state
    entity_id:
    - switch.upstairs_coffee_plug
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: script.morning_briefing_mark
    data: {}
  mode: single
- id: '1679239750007'
  alias: Birthday Reminder Text
  description: send text with upcoming birthday list
  trigger:
  - platform: template
    value_template: '{{ (now().day == 1) and ((now().hour * 60) + (now().minute) ==
      840) }}'
  - platform: template
    value_template: '{{ (now().day == 15) and ((now().hour * 60) + (now().minute)
      == 840) }}'
  condition: []
  action:
  - service: script.birthday_text_holly
    data: {}
  mode: single
- id: '1679407893356'
  alias: Coffee Pot Timers
  description: turn off coffee pots after certain amount of time for safety
  trigger:
  - platform: state
    entity_id:
    - switch.basement_coffee_plug
    to: 'on'
    id: basement on
  - platform: state
    entity_id:
    - switch.upstairs_coffee_plug
    to: 'on'
    id: upstairs on
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.basement_coffee_timer
    id: basement off
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.upstairs_coffee_timer
    id: upstairs off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: basement on
      sequence:
      - service: timer.start
        data: {}
        target:
          entity_id: timer.basement_coffee_timer
    - conditions:
      - condition: trigger
        id: upstairs on
      sequence:
      - service: timer.start
        data: {}
        target:
          entity_id: timer.upstairs_coffee_timer
    - conditions:
      - condition: trigger
        id: basement off
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.basement_coffee_plug
    - conditions:
      - condition: trigger
        id: upstairs off
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.upstairs_coffee_plug
  mode: single
- id: '1679491406501'
  alias: Appliance Cabinet Light Manual Override
  description: override cabinset sensor when light is manually turned on or off
  trigger:
  - platform: state
    entity_id:
    - light.hallway
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 1
    id: manual off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: manual off
      sequence:
      - service: automation.turn_on
        data: {}
        target:
          entity_id: automation.appliance_cabinet_light
  mode: single
- id: '1679503390509'
  alias: Upstairs Staircase Motion Manual Override
  description: override motion sensor when manually turning lights on or off
  trigger:
  - platform: state
    entity_id:
    - light.upstairs_office
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 5
    id: manual switch off
  - platform: state
    entity_id:
    - light.upstairs_office
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 2
    id: manual switch on
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: manual switch off
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.upstairs_office_light_status
      - if:
        - condition: state
          entity_id: automation.upstairs_staircase_motion_lights
          state: 'off'
        then:
        - service: automation.turn_on
          data: {}
          target:
            entity_id: automation.upstairs_staircase_motion_lights
    - conditions:
      - condition: trigger
        id: manual switch on
      sequence:
      - if:
        - condition: not
          conditions:
          - condition: state
            entity_id: binary_sensor.upstairs_staircase_motion_sensor_occupancy
            state: 'on'
        then:
        - service: automation.turn_off
          data:
            stop_actions: true
          target:
            entity_id: automation.upstairs_staircase_motion_lights
  mode: single
- id: '1679505555393'
  alias: HVAC Fan Assist
  description: turn on ceiling fans and box fans and vent fans to help with circulation
  trigger:
  - platform: template
    value_template: '{{ (state_attr(''climate.house'',''hvac_action'') != ''idle'')
      and (state_attr(''climate.house'',''hvac_action'') != ''off'') }}'
    id: fan on
  - platform: template
    value_template: '{{ (state_attr(''climate.house'',''hvac_action'') == ''idle'')
      or (state_attr(''climate.house'',''hvac_action'') == ''off'') }}'
    id: fan off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: fan on
      sequence:
      - if:
        - condition: state
          entity_id: fan.family_fan
          state: 'on'
        then:
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.fan_helper_family
        else:
        - service: fan.set_percentage
          data:
            percentage: 33
          target:
            entity_id: fan.family_fan
      - if:
        - condition: state
          entity_id: fan.master_fan
          state: 'on'
        then:
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.fan_helper_master
        else:
        - service: fan.set_percentage
          data:
            percentage: 33
          target:
            entity_id: fan.master_fan
      - if:
        - condition: state
          entity_id: switch.box_fan_plug
          state: 'on'
        then:
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.fan_helper_box
        else:
        - service: switch.turn_on
          data: {}
          target:
            entity_id: switch.box_fan_plug
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.vent_fan_plug
    - conditions:
      - condition: trigger
        id: fan off
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.fan_helper_box
          state: 'on'
        then:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.fan_helper_box
        else:
        - service: switch.turn_off
          data: {}
          target:
            entity_id: switch.box_fan_plug
      - if:
        - condition: state
          entity_id: input_boolean.fan_helper_family
          state: 'on'
        then:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.fan_helper_family
        else:
        - service: fan.turn_off
          data: {}
          target:
            entity_id: fan.family_fan
      - if:
        - condition: state
          entity_id: input_boolean.fan_helper_master
          state: 'on'
        then:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.fan_helper_master
        else:
        - service: fan.turn_off
          data: {}
          target:
            entity_id: fan.master_fan
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.vent_fan_plug
  mode: single
- id: '1679508958053'
  alias: Mail Reminder Announcement
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.breezeway_motion_sensor_motion
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 15
  condition:
  - condition: time
    after: 06:00:00
    before: '16:00:00'
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
  action:
  - if:
    - condition: state
      entity_id: input_boolean.mail_reminder
      state: 'on'
    then:
    - service: notify.alexa_media_portable_echo
      data:
        message: Please take the mail with you!
        data:
          type: tts
  mode: single
- id: '1679681582131'
  alias: House Occuppancy
  description: turn things on and off when house is occupied or not occupied.
  trigger:
  - platform: state
    entity_id:
    - input_boolean.house_occuppied
    to: 'off'
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: away
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.sweeper_away_timer
    id: timer finished
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: away
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.whole_house
      - service: switch.turn_off
        data: {}
        target:
          entity_id:
          - switch.wall_left_plug
          - switch.wall_right_plug
          - switch.basement_counter_plug
          - switch.basement_coffee_plug
          - switch.upstairs_coffee_plug
          - switch.basement_sink_switch
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_alice
          state: 'off'
        then:
        - service: vacuum.start
          data: {}
          target:
            entity_id: vacuum.alice
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_benson
          state: 'off'
        then:
        - service: vacuum.start
          data: {}
          target:
            entity_id: vacuum.benson
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_lurch
          state: 'off'
        then:
        - service: vacuum.start
          data: {}
          target:
            entity_id: vacuum.lurch
      - if:
        - condition: state
          entity_id: input_boolean.sweeper_out_of_service_mister_belvedere
          state: 'off'
        then:
        - service: vacuum.start
          data: {}
          target:
            entity_id: vacuum.mister_belvedere
      - if:
        - condition: state
          state: 'off'
          entity_id: input_boolean.sweeper_out_of_service_rosie
        then:
        - if:
          - condition: state
            entity_id: input_boolean.sweep_zone_office
            state: 'on'
          then:
          - service: media_player.play_media
            data:
              media_content_id: clean office
              media_content_type: routine
            target:
              entity_id: media_player.master_echo
          - service: input_boolean.toggle
            data: {}
            target:
              entity_id: input_boolean.sweep_zone_office
          else:
          - service: media_player.play_media
            data:
              media_content_id: clean master bedroom
              media_content_type: routine
            target:
              entity_id: media_player.master_echo
          - service: input_boolean.toggle
            data: {}
            target:
              entity_id: input_boolean.sweep_zone_office
      - if:
        - condition: or
          conditions:
          - condition: state
            entity_id: vacuum.alice
            state: cleaning
          - condition: state
            entity_id: vacuum.benson
            state: cleaning
          - condition: state
            entity_id: vacuum.lurch
            state: cleaning
          - condition: state
            entity_id: vacuum.mister_belvedere
            state: cleaning
        then:
        - service: timer.start
          data: {}
          target:
            entity_id: timer.sweeper_away_timer
    - conditions:
      - condition: trigger
        id: timer finished
      sequence:
      - service: vacuum.return_to_base
        data: {}
        target:
          entity_id:
          - vacuum.alice
          - vacuum.benson
          - vacuum.lurch
          - vacuum.mister_belvedere
  mode: single
- id: '1679698078626'
  alias: test timer
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.second_alexa_timer
  condition: []
  action:
  - service: media_player.play_media
    data:
      media_content_type: custom
      media_content_id: set a timer for {{ states('input_number.second_alexa_timer')|round()
        }} minutes.
    target:
      entity_id: media_player.family_echo
  mode: single
- id: '1679750160033'
  alias: sweeper clean group
  description: change clean sweeper on group change
  trigger:
  - platform: state
    entity_id:
    - input_boolean.clean_alice
    - input_boolean.clean_benson
    - input_boolean.clean_lurch
    - input_boolean.clean_mr_belvedere
    - input_boolean.clean_rosie
    to: 'on'
    id: 'on'
  - platform: state
    entity_id:
    - input_boolean.clean_alice
    - input_boolean.clean_benson
    - input_boolean.clean_mr_belvedere
    - input_boolean.clean_lurch
    - input_boolean.clean_rosie
    to: 'off'
    id: 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.clean_sweepers
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - if:
        - condition: and
          conditions:
          - condition: state
            entity_id: input_boolean.clean_alice
            state: 'off'
          - condition: state
            entity_id: input_boolean.clean_benson
            state: 'off'
          - condition: state
            entity_id: input_boolean.clean_lurch
            state: 'off'
          - condition: state
            entity_id: input_boolean.clean_mr_belvedere
            state: 'off'
          - condition: state
            entity_id: input_boolean.clean_rosie
            state: 'off'
        then:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.clean_sweepers
  mode: single
- id: '1679840542188'
  alias: Mount Folder
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: shell_command.mount_nas_folder
    data: {}
  mode: single
- id: '1679842157772'
  alias: gitHub update
  description: ''
  trigger:
  - platform: template
    value_template: '{{ (now().hour == 11) and (now().weekday() == 6) }}'
  condition: []
  action:
  - service: shell_command.pushupdates_to_github
    data: {}
  mode: single
